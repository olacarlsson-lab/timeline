<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Timeline</title>
    <link rel="stylesheet" href="styles.css?v=6">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#31567D">
</head>

<body>
    <div class="app">
        <header class="header">
            <div class="controls">
                <button id="controlPanelToggle" data-title="settingsTitle" title="Filter & inställningar">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="4" y1="21" x2="4" y2="14"></line>
                        <line x1="4" y1="10" x2="4" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12" y2="3"></line>
                        <line x1="20" y1="21" x2="20" y2="16"></line>
                        <line x1="20" y1="12" x2="20" y2="3"></line>
                        <line x1="1" y1="14" x2="7" y2="14"></line>
                        <line x1="9" y1="8" x2="15" y2="8"></line>
                        <line x1="17" y1="16" x2="23" y2="16"></line>
                    </svg>
                    <span id="filterIndicator" class="filter-indicator" style="display:none;"></span>
                </button>
                <button id="addProjectBtn" class="btn btn-primary" data-label="addProject">Projekt</button>
                <button id="addEventBtn" class="btn btn-secondary" data-label="addEvent">Händelse</button>
                <div class="divider"></div>
                <div class="view-controls">
                    <button id="view2Years" class="btn btn-view" data-label="zoom2YearsLabel"
                        data-title="zoom2YearsTitle">2 år</button>
                    <button id="view1Year" class="btn btn-view" data-label="zoom1YearLabel"
                        data-title="zoom1YearTitle">1 år</button>
                    <button id="view3Months" class="btn btn-view active" data-label="zoom3MonthsLabel"
                        data-title="zoom3MonthsTitle">3 mån</button>
                </div>
                <button id="todayBtn" class="btn btn-secondary" data-label="today">Idag</button>
                <div class="divider"></div>
                <div class="undo-redo-controls">
                    <button id="undoBtn" class="btn btn-icon-round" title="Ångra (Ctrl+Z)" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 7v6h6"></path>
                            <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
                        </svg>
                    </button>
                    <button id="redoBtn" class="btn btn-icon-round" title="Gör om (Ctrl+Y)" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 7v6h-6"></path>
                            <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"></path>
                        </svg>
                    </button>
                </div>
                <button id="infoBtn" class="btn btn-icon-round" data-title="helpTitle" title="Hur det fungerar">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                </button>
            </div>
        </header>

        <div class="timeline-container" id="timelineContainer">
            <div class="timeline-header" id="timelineHeader"></div>
            <div class="timeline-body" id="timelineBody">
                <div class="timeline-grid" id="timelineGrid"></div>
                <div class="timeline-content" id="timelineContent"></div>
                <div class="today-marker" id="todayMarker"></div>
            </div>
        </div>
        <!-- Date indicator for drag/resize -->
        <div id="dragDateIndicator" class="drag-date-indicator"></div>
    </div>

    <!-- Modal för att lägga till projekt -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-label="newProject">Nytt projekt</h2>
                <button class="modal-close" id="closeProjectModal">&times;</button>
            </div>
            <form id="projectForm">
                <div class="form-group">
                    <label for="projectName" data-label="projectName">Projektnamn</label>
                    <input type="text" id="projectName" required data-placeholder="projectNamePlaceholder">
                </div>
                <div class="form-group">
                    <label for="projectLead" data-label="projectLead">Projektledare</label>
                    <input type="text" id="projectLead" placeholder="Valfritt" data-placeholder="optional">
                </div>
                <div class="form-group">
                    <label for="projectStatus" data-label="status">Status</label>
                    <select id="projectStatus">
                    </select>
                </div>
                <div class="form-group">
                    <label data-label="startDate">Startdatum</label>
                    <div class="date-picker">
                        <select id="projectStartType" class="date-type-select">
                            <option value="date">Datum</option>
                            <option value="week">Vecka</option>
                            <option value="month">Månad</option>
                        </select>
                        <input type="date" id="projectStartDate" class="date-input">
                        <div id="projectStartWeekGroup" class="week-group" style="display:none;">
                            <select id="projectStartWeekNum" class="week-num-input"></select>
                            <select id="projectStartWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="projectStartMonthGroup" class="month-group" style="display:none;">
                            <select id="projectStartMonthNum" class="month-num-input"></select>
                            <select id="projectStartMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label data-label="endDate">Slutdatum</label>
                    <div class="date-picker">
                        <select id="projectEndType" class="date-type-select">
                            <option value="date">Datum</option>
                            <option value="week">Vecka</option>
                            <option value="month">Månad</option>
                        </select>
                        <input type="date" id="projectEndDate" class="date-input">
                        <div id="projectEndWeekGroup" class="week-group" style="display:none;">
                            <select id="projectEndWeekNum" class="week-num-input"></select>
                            <select id="projectEndWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="projectEndMonthGroup" class="month-group" style="display:none;">
                            <select id="projectEndMonthNum" class="month-num-input"></select>
                            <select id="projectEndMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="projectColor" data-label="area">Område</label>
                    <select id="projectColor" class="color-select">
                    </select>
                    <a href="#" id="openAreasFromProject" class="form-hint-link" data-label="manageAreas">Hantera
                        områden</a>
                </div>
                <div class="form-group">
                    <label for="projectComment" data-label="comment">Kommentar</label>
                    <textarea id="projectComment" rows="3" data-placeholder="commentPlaceholder"
                        placeholder="Valfri kommentar..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelProject"
                        data-label="cancel">Avbryt</button>
                    <button type="submit" class="btn btn-primary" data-label="save">Spara</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal för att lägga till händelse -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-label="newEvent">Ny händelse</h2>
                <button class="modal-close" id="closeEventModal">&times;</button>
            </div>
            <form id="eventForm">
                <div class="form-group">
                    <label for="eventName" data-label="eventName">Händelse</label>
                    <input type="text" id="eventName" required data-placeholder="freeText">
                </div>
                <div class="form-group">
                    <label data-label="startDate">Startdatum</label>
                    <div class="date-picker">
                        <select id="eventStartType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="eventStartDate" class="date-input">
                        <div id="eventStartWeekGroup" class="week-group" style="display:none;">
                            <select id="eventStartWeekNum" class="week-num-input"></select>
                            <select id="eventStartWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="eventStartMonthGroup" class="month-group" style="display:none;">
                            <select id="eventStartMonthNum" class="month-num-input"></select>
                            <select id="eventStartMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label data-label="endDate">Slutdatum (valfritt)</label>
                    <div class="date-picker">
                        <select id="eventEndType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="eventEndDate" class="date-input">
                        <div id="eventEndWeekGroup" class="week-group" style="display:none;">
                            <select id="eventEndWeekNum" class="week-num-input"></select>
                            <select id="eventEndWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="eventEndMonthGroup" class="month-group" style="display:none;">
                            <select id="eventEndMonthNum" class="month-num-input"></select>
                            <select id="eventEndMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="eventProject"><span data-label="project">Projekt</span> (<span
                            data-label="optional">valfritt</span>)</label>
                    <select id="eventProject">
                        <option value="" data-label="none">Ingen koppling</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventSymbol"><span data-label="symbolLabel">Symbol</span> (<span
                            data-label="optional">valfritt</span>)</label>
                    <select id="eventSymbol">
                        <option value="" data-label="symbolStandard">Standard (Balk/Punkt)</option>
                        <option value="star" data-label="symbolStar">Stjärna</option>
                        <option value="diamond" data-label="symbolDiamond">Diamant</option>
                        <option value="flag" data-label="symbolFlag">Flagga</option>
                        <option value="warning" data-label="symbolWarning">Varning</option>
                        <option value="check" data-label="symbolCheck">Klar</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="eventRepeat"><span data-label="repeatLabel">Upprepa</span> (<span
                            data-label="optional">valfritt</span>)</label>
                    <div class="repeat-settings">
                        <select id="eventRepeat">
                            <option value="" data-label="repeatNone">Ingen upprepning</option>
                            <option value="weekly" data-label="repeatWeekly">Varje vecka</option>
                            <option value="biweekly" data-label="repeatBiweekly">Varannan vecka</option>
                            <option value="monthly" data-label="repeatMonthly">Varje månad</option>
                            <option value="yearly" data-label="repeatYearly">Varje år</option>
                        </select>
                        <div id="repeatUntilGroup" class="repeat-until-group" style="display:none;">
                            <label for="eventRepeatUntil" data-label="repeatUntil">Fram till</label>
                            <input type="date" id="eventRepeatUntil" class="date-input">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="eventComment" data-label="comment">Kommentar</label>
                    <textarea id="eventComment" rows="3" data-placeholder="commentPlaceholder"
                        placeholder="Valfri kommentar..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEvent" data-label="cancel">Avbryt</button>
                    <button type="submit" class="btn btn-primary" data-label="save">Spara</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal för att redigera/ta bort -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="editModalTitle" data-label="edit">Redigera</h2>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editForm">
                <div class="form-group">
                    <label for="editName" data-label="name">Namn</label>
                    <input type="text" id="editName" required>
                </div>
                <div class="form-group" id="editLeadGroup">
                    <label for="editLead" data-label="projectLead">Projektledare</label>
                    <input type="text" id="editLead" placeholder="Valfritt" data-placeholder="optional">
                </div>
                <div class="form-group" id="editStatusGroup">
                    <label for="editStatus" data-label="status">Status</label>
                    <select id="editStatus">
                    </select>
                </div>
                <div class="form-group" id="editStartGroup">
                    <label data-label="startDate">Startdatum</label>
                    <div class="date-picker">
                        <select id="editStartType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="editStartDate" class="date-input">
                        <div id="editStartWeekGroup" class="week-group" style="display:none;">
                            <select id="editStartWeekNum" class="week-num-input"></select>
                            <select id="editStartWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="editStartMonthGroup" class="month-group" style="display:none;">
                            <select id="editStartMonthNum" class="month-num-input"></select>
                            <select id="editStartMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="editEndGroup">
                    <label data-label="endDate">Slutdatum</label>
                    <div class="date-picker">
                        <select id="editEndType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="editEndDate" class="date-input">
                        <div id="editEndWeekGroup" class="week-group" style="display:none;">
                            <select id="editEndWeekNum" class="week-num-input"></select>
                            <select id="editEndWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="editEndMonthGroup" class="month-group" style="display:none;">
                            <select id="editEndMonthNum" class="month-num-input"></select>
                            <select id="editEndMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="editEventStartGroup">
                    <label data-label="startDate">Startdatum</label>
                    <div class="date-picker">
                        <select id="editEventStartType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="editEventStartDate" class="date-input">
                        <div id="editEventStartWeekGroup" class="week-group" style="display:none;">
                            <select id="editEventStartWeekNum" class="week-num-input"></select>
                            <select id="editEventStartWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="editEventStartMonthGroup" class="month-group" style="display:none;">
                            <select id="editEventStartMonthNum" class="month-num-input"></select>
                            <select id="editEventStartMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="editEventEndGroup">
                    <label data-label="endDate">Slutdatum (valfritt)</label>
                    <div class="date-picker">
                        <select id="editEventEndType" class="date-type-select">
                            <option value="date" data-label="dateTypeDate">Datum</option>
                            <option value="week" data-label="dateTypeWeek">Vecka</option>
                            <option value="month" data-label="dateTypeMonth">Månad</option>
                        </select>
                        <input type="date" id="editEventEndDate" class="date-input">
                        <div id="editEventEndWeekGroup" class="week-group" style="display:none;">
                            <select id="editEventEndWeekNum" class="week-num-input"></select>
                            <select id="editEventEndWeekYear" class="week-year-input"></select>
                        </div>
                        <div id="editEventEndMonthGroup" class="month-group" style="display:none;">
                            <select id="editEventEndMonthNum" class="month-num-input"></select>
                            <select id="editEventEndMonthYear" class="month-year-input"></select>
                        </div>
                    </div>
                </div>
                <div class="form-group" id="editProjectGroup">
                    <label for="editProject" data-label="project">Projekt</label>
                    <select id="editProject">
                        <option value="" data-label="none">Ingen koppling</option>
                    </select>
                </div>
                <div class="form-group" id="editSymbolGroup">
                    <label for="editSymbol"><span data-label="symbolLabel">Symbol</span> (<span
                            data-label="optional">valfritt</span>)</label>
                    <select id="editSymbol">
                        <option value="" data-label="symbolStandard">Standard (Balk/Punkt)</option>
                        <option value="star" data-label="symbolStar">Stjärna</option>
                        <option value="diamond" data-label="symbolDiamond">Diamant</option>
                        <option value="flag" data-label="symbolFlag">Flagga</option>
                        <option value="warning" data-label="symbolWarning">Varning</option>
                        <option value="check" data-label="symbolCheck">Klar</option>
                    </select>
                </div>
                <div class="form-group" id="editColorGroup">
                    <label for="editColor" data-label="area">Område</label>
                    <select id="editColor" class="color-select">
                    </select>
                    <a href="#" id="openAreasFromEdit" class="form-hint-link" data-label="manageAreas">Hantera
                        områden</a>
                </div>
                <div class="form-group" id="editCommentGroup">
                    <label for="editComment" data-label="comment">Kommentar</label>
                    <textarea id="editComment" rows="3" data-placeholder="commentPlaceholder"
                        placeholder="Valfri kommentar..."></textarea>
                </div>
                <input type="hidden" id="editId">
                <input type="hidden" id="editType">
                <div class="form-actions">
                    <button type="button" class="btn btn-danger" id="deleteItem" data-label="delete">Ta bort</button>
                    <button type="button" class="btn btn-secondary" id="convertItem" data-label="convertToEvent">Gör till händelse</button>
                    <button type="button" class="btn btn-secondary" id="cancelEdit" data-label="cancel">Avbryt</button>
                    <button type="submit" class="btn btn-primary" data-label="save">Spara</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Project Sidebar -->
    <div id="projectSidebar" class="sidebar sidebar-left">
        <div class="sidebar-bottom-sheet-handle"></div>
        <div class="sidebar-header">
            <h2 id="sidebarTitle" data-label="projectDetails">Projektdetaljer</h2>
            <button id="closeSidebar" class="btn-icon">&#10005;</button>
        </div>
        <div class="sidebar-content" id="sidebarContent">
        </div>
        <div class="sidebar-actions">
            <button id="sidebarEditBtn" class="btn btn-primary" data-label="edit">Redigera</button>
        </div>
    </div>

    <!-- Event Sidebar -->
    <div id="eventSidebar" class="sidebar sidebar-right">
        <div class="sidebar-bottom-sheet-handle"></div>
        <div class="sidebar-header">
            <h2 id="eventSidebarTitle" data-label="eventDetails">Händelsedetaljer</h2>
            <button id="closeEventSidebar" class="btn-icon">&#10005;</button>
        </div>
        <div class="sidebar-content" id="eventSidebarContent">
        </div>
        <div class="sidebar-actions">
            <button id="eventSidebarEditBtn" class="btn btn-primary" data-label="edit">Redigera</button>
        </div>
    </div>

    <!-- Information Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-content modal-content-wide">
            <div class="modal-header">
                <h2 data-label="helpTitle">Om Tidslinje</h2>
                <button class="modal-close" id="closeInfoModal">&times;</button>
            </div>
            <div class="info-modal-content">
                <section class="info-section">
                    <h3 data-label="aboutTitle">Vad är Tidslinje?</h3>
                    <p data-label="aboutText">Tidslinje är ett visuellt planeringsverktyg för att hantera projekt och händelser över tid. Perfekt för verksamhetsplanering, utställningsplanering, projektöversikter eller personlig planering.</p>
                </section>
                <section class="info-section">
                    <h3 data-label="featuresTitle">Funktioner</h3>
                    <ul class="info-list" data-label="featuresList"></ul>
                </section>
                <section class="info-section">
                    <h3 data-label="tipsTitle">Tips</h3>
                    <ul class="info-list" data-label="tipsList"></ul>
                </section>
                <section class="info-section">
                    <h3 data-label="importTitle">Import & Export</h3>
                    <p data-label="importText">Importera JSON-filer (sparad data) eller iCal-kalenderfiler (.ics) - praktiskt för t.ex. helgdagar. Du kan även importera från en URL. Exportera som JSON för säkerhetskopiering.</p>
                </section>
                <section class="info-section">
                    <h3 data-label="privacyTitle">Integritet & Lagring</h3>
                    <p data-label="privacyText">All data lagras lokalt i din webbläsare - ingenting skickas till någon server. Spara regelbundet en JSON-fil som säkerhetskopia.</p>
                </section>
                <section class="info-section">
                    <h3 data-label="offlineTitle">Offline & Installation</h3>
                    <p data-label="offlineText">Tidslinje är en PWA och kan installeras på din enhet. När den är installerad fungerar den även offline.</p>
                </section>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-primary" id="confirmInfo" data-label="infoGotIt">Uppfattat</button>
            </div>
        </div>
    </div>

    <!-- Custom Modal System -->
    <div id="customModal" class="custom-modal-overlay">
        <div class="custom-modal-container">
            <div id="customModalTitle" class="custom-modal-title">Bekräfta</div>
            <div id="customModalBody" class="custom-modal-input-group">
                <input type="text" id="customModalInput" class="custom-modal-input" autocomplete="off">
                <div id="customModalZoomRow" class="custom-modal-row" style="display: none;">
                    <input type="number" id="customModalAmount" class="custom-modal-input" placeholder="Antal" min="1">
                    <select id="customModalUnit" class="custom-modal-select">
                        <option value="days">Dagar</option>
                        <option value="weeks">Veckor</option>
                        <option value="months">Månader</option>
                        <option value="years">År</option>
                    </select>
                </div>
            </div>
            <div class="custom-modal-actions">
                <button id="customModalCancel" class="custom-modal-btn custom-modal-btn-secondary"
                    data-label="cancel">Avbryt</button>
                <button id="customModalConfirm" class="custom-modal-btn custom-modal-btn-primary"
                    data-label="save">Spara</button>
            </div>
        </div>
    </div>

    <!-- Control Panel moved to end of body to prevent layout issues -->
    <div id="controlPanelBackdrop" class="control-panel-backdrop"></div>
    <div id="controlPanel" class="control-panel">
        <div class="control-panel-header">
            <h3 data-label="settingsTitle">Filter & inställningar</h3>
            <div style="display: flex; gap: 0.5rem; flex-shrink: 0;">
                <button id="themeToggle" class="btn-icon" data-title="toggleTheme" title="Växla tema">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <div class="lang-switcher">
                    <button id="langSv" class="btn-lang" title="Svenska">SV</button>
                    <button id="langEn" class="btn-lang" title="English">EN</button>
                </div>
                <button id="controlPanelClose" class="btn-icon">&#10005;</button>
            </div>
        </div>
        <div class="control-panel-body">
            <div class="panel-section">
                <label for="searchInput" data-label="searchLabel">Sök</label>
                <input type="search" id="searchInput" placeholder="Sök projekt..." data-placeholder="searchPlaceholder"
                    class="search-input">
            </div>
            <div class="panel-section">
                <label for="filterLead" data-label="projectLead">Projektledare</label>
                <select id="filterLead">
                    <option value="">Alla</option>
                </select>
            </div>
            <div class="panel-section">
                <label for="filterStatus" data-label="status">Status</label>
                <select id="filterStatus">
                    <option value="" data-label="all">Alla</option>
                </select>
            </div>
            <div class="panel-section">
                <label for="filterArea" data-label="area">Område</label>
                <select id="filterArea">
                    <option value="" data-label="all">Alla</option>
                </select>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section">
                <label for="sortSelect" data-label="sort">Sortera</label>
                <select id="sortSelect">
                    <option value="lead" data-label="projectLead">Projektledare</option>
                    <option value="color" data-label="area">Område</option>
                    <option value="name" data-label="name">Namn</option>
                    <option value="start" data-label="startDate">Startdatum</option>
                    <option value="end" data-label="endDate">Slutdatum</option>
                    <option value="status" data-label="status">Status</option>
                </select>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section">
                <label data-label="timelineTitle">Timeline</label>
                <div class="panel-range">
                    <input type="number" id="timelineStartYear" class="year-input" min="2000" max="2100" title="Startår"
                        data-title="startYear">
                    <span class="range-separator">–</span>
                    <input type="number" id="timelineEndYear" class="year-input" min="2000" max="2100" title="Slutår"
                        data-title="endYear">
                </div>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section panel-section-row">
                <div class="btn-dropdown">
                    <button id="importBtn" class="btn btn-secondary" data-label="open">Öppna</button>
                    <button id="importDropdownBtn" class="btn btn-secondary btn-dropdown-toggle">▾</button>
                    <div id="importDropdownMenu" class="btn-dropdown-menu">
                        <button id="importFileBtn" class="btn-dropdown-item" data-label="openFile">Öppna fil...</button>
                        <button id="importUrlBtn" class="btn-dropdown-item" data-label="importUrl">Importera från URL...</button>
                    </div>
                </div>
                <button id="exportBtn" class="btn btn-secondary" data-label="export">Spara</button>
                <input type="file" id="importFile" accept=".json,.ics" style="display: none;">
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section">
                <label data-label="reset">Återställ</label>
                <div class="panel-section-row">
                    <button id="resetSampleBtn" class="btn btn-secondary" data-label="exampleData">Exempeldata</button>
                    <button id="resetEmptyBtn" class="btn btn-secondary" data-label="createNew">Skapa ny</button>
                </div>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section">
                <label data-label="areasPlural">Områden</label>
                <div id="areaList" class="area-list"></div>
                <div id="areaAddForm" class="area-add-form">
                    <input type="color" id="areaNewColor" value="#6366f1" class="area-color-input">
                    <input type="text" id="areaNewName" placeholder="Nytt område..." data-placeholder="areaPlaceholder"
                        class="area-name-input">
                    <button id="areaAddBtn" class="btn btn-primary area-add-btn">+</button>
                </div>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section">
                <label data-label="statusesPlural">Statusar</label>
                <div id="statusList" class="status-list"></div>
                <div id="statusAddForm" class="status-add-form">
                    <input type="text" id="statusNewName" placeholder="Ny status..."
                        data-placeholder="statusPlaceholder" class="status-name-input">
                    <button id="statusAddBtn" class="btn btn-primary status-add-btn">+</button>
                </div>
            </div>
            <div class="panel-divider"></div>
            <div class="panel-section panel-collapsible" id="advancedPanel">
                <div class="panel-collapse-header" id="advancedToggle">
                    <span data-label="advanced">Avancerat</span>
                    <svg class="collapse-icon" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div id="advancedContent" class="panel-collapse-content">
                    <label data-label="fieldNameLabel"
                        style="margin-top: 0.5rem; display: block; font-size: 0.75rem; color: var(--text-muted);">Namn
                        på fält</label>
                    <div class="label-setting-row" data-label-key="event">
                        <span class="label-setting-name" data-label="event">Händelse</span>
                        <button class="btn-edit-label" data-title="edit" title="Redigera">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="label-setting-row" data-label-key="area">
                        <span class="label-setting-name" data-label="area">Område</span>
                        <button class="btn-edit-label" data-title="edit" title="Redigera">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="label-setting-row" data-label-key="projectLead">
                        <span class="label-setting-name" data-label="projectLead">Projektledare</span>
                        <button class="btn-edit-label" data-title="edit" title="Redigera">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="label-setting-row" data-label-key="status">
                        <span class="label-setting-name" data-label="status">Status</span>
                        <button class="btn-edit-label" data-title="edit" title="Redigera">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                            </svg>
                        </button>
                    </div>

                    <label data-label="zoomLevelsLabel"
                        style="margin-top: 1rem; display: block; font-size: 0.75rem; color: var(--text-muted);">Zoomnivåer</label>
                    <div class="label-settings">
                        <div class="label-setting-row" data-zoom-key="zoom2Years">
                            <div class="label-setting-name"><span data-label="zoom2YearsLabel">2 år</span></div>
                            <button class="btn-edit-zoom" data-title="edit" title="Anpassa zoom"><svg width="14"
                                    height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg></button>
                        </div>
                        <div class="label-setting-row" data-zoom-key="zoom1Year">
                            <div class="label-setting-name"><span data-label="zoom1YearLabel">1 år</span></div>
                            <button class="btn-edit-zoom" data-title="edit" title="Anpassa zoom"><svg width="14"
                                    height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg></button>
                        </div>
                        <div class="label-setting-row" data-zoom-key="zoom3Months">
                            <div class="label-setting-name"><span data-label="zoom3MonthsLabel">3 mån</span></div>
                            <button class="btn-edit-zoom" data-title="edit" title="Anpassa zoom"><svg width="14"
                                    height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="app.js?v=5"></script>
</body>

</html>